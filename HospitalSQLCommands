CREATE TABLE Patient
(
  PPSN CHAR(8) NOT NULL,
  First_Name VARCHAR(12) NOT NULL,
  Surname VARCHAR(20) NOT NULL,
  Street VARCHAR(16) NOT NULL,
  Town VARCHAR(16) NOT NULL,
  County VARCHAR(16) NOT NULL,
  Ethnicity VARCHAR(16) NOT NULL,
  Sex CHAR(1) NOT NULL,
  Height INT NOT NULL,
  Weight INT NOT NULL,
  Blood_Group VARCHAR(3) NOT NULL,
  PRIMARY KEY (PPSN)
);

CREATE TABLE Staff
(
PPSN CHAR(8) NOT NULL,
First_Name VARCHAR(16) NOT NULL,
Second_Name VARCHAR(20) NOT NULL,
Role VARCHAR(20) NOT NULL,
Dept INT NOT NULL,
Supervisor CHAR(8),
PRIMARY KEY (PPSN),
FOREIGN KEY (Supervisor) REFERENCES Staff(PPSN)
);

CREATE TABLE Department
(
DeptNo INT NOT NULL,
Department_Name VARCHAR(16) NOT NULL,
Dept_Head CHAR(8) NOT NULL,
PRIMARY KEY (DeptNo),
FOREIGN KEY (Dept_Head) REFERENCES Staff(PPSN)
);

ALTER TABLE Staff ADD FOREIGN KEY (Dept) REFERENCES Department(DeptNo);

CREATE TABLE Bed
(
Number INT NOT NULL,
Location INT NOT NULL,
PRIMARY KEY (Number),
FOREIGN KEY (Location) REFERENCES Department(DeptNo)
);

CREATE TABLE Stay
(
ID INT NOT NULL,
Date DATE NOT NULL,
Details VARCHAR(512),
Bed_No INT,
Priority INT NOT NULL,
Patient CHAR(8) NOT NULL,
Doctor CHAR(8) NOT NULL,
PRIMARY KEY (ID),
FOREIGN KEY (Patient) REFERENCES Patient(PPSN),
FOREIGN KEY (Doctor) REFERENCES Staff(PPSN),
FOREIGN KEY (Bed_No) REFERENCES Bed(Bed_No)
);


CREATE TABLE Room
(
  Number INT NOT NULL,
  Type VARCHAR(16) NOT NULL,
  Location INT NOT NULL,
  PRIMARY KEY (Number),
  FOREIGN KEY (Location) REFERENCES Department(DeptNo)
);

CREATE TABLE Operation
(
  ID INT NOT NULL,
  Type VARCHAR(16) NOT NULL,
  Room INT NOT NULL,
  Patient_Case INT NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (Room) REFERENCES Room(Number),
  FOREIGN KEY (Patient_Case) REFERENCES Stay(ID)
);

CREATE TABLE Performs
(
  Operation INT NOT NULL,
  Staff CHAR(8) NOT NULL,
  PRIMARY KEY (Operation, Staff),
  FOREIGN KEY (Operation) REFERENCES Operation(ID),
  FOREIGN KEY (Staff) REFERENCES Staff(PPSN)
);
